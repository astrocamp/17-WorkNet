{% extends "layouts/base.html" %}
{% block content %}
<div class="relative flex items-center justify-center overflow-hidden text-center h-44 md:h-80 lg:h-80">
  {% if company %}
    <h1 class="relative z-20 text-3xl font-bold text-white md:text-5xl lg:text-5xl">{{ company.title }}的所有評論</h1>
  {% else %}
    <h1 class="relative z-20 text-3xl font-bold text-white md:text-5xl lg:text-5xl">所有評論</h1>
  {% endif %}
  <div class="absolute inset-0 z-10 m-auto bg-fixed bg-center bg-cover bg-banner-img"></div>
  <div class="absolute z-10 m-auto inset-0 bg-gradient-to-b from-[rgba(68,157,209,0.9)] to-[rgba(0,51,107,0.9)]"></div>
</div>
<div class="container p-5 pb-24 mx-auto">
  {% if company and request.user.type != 2 %}
    <a class="text-white btn btn-primary min-w-20" href="{% url 'companies:post_new' company.id %}">撰寫評論</a>
  {% endif %}
  <ul class="mt-6 divide-y divide-slate-200">
    {% for item in page_obj %}
    <li class="flex gap-2 p-5">
      <div class="flex-1">
        <a href="{% url 'posts:show' id=item.post.id %}">{{ item.post.title }}</a>
      </div>
      <div class="flex gap-2">
        {% if item.can_edit %}
          <a class="text-white btn btn-primary btn-sm" href="{% url 'posts:edit' id=item.post.id %}">編輯</a>
          <form
            action="{% url 'posts:delete' id=item.post.id %}"
            method="POST"
            hx-post="{% url 'posts:delete' id=item.post.id %}"
            hx-confirm="確認刪除？"
            hx-target="body"
          >
            {% csrf_token %}
            <button class="text-white btn btn-error btn-sm" type="submit">刪除</button>
          </form>
        {% endif %}
      </div>
    </li>
    {% endfor %}
  </ul>
  {% include 'shared/_pagination.html' %}
</div>
{% endblock %}