{% extends "layouts/base.html" %}
{% block content %}
<div class="relative flex items-center justify-center overflow-hidden text-center h-44 md:h-80 lg:h-80">
    <h1 class="relative z-20 text-3xl font-bold text-white md:text-5xl lg:text-5xl">{{ company.title }} 評論</h1>
    <div class="absolute inset-0 z-10 m-auto bg-fixed bg-center bg-cover bg-banner-img"></div>
    <div class="absolute z-10 m-auto inset-0 bg-gradient-to-b from-[rgba(68,157,209,0.9)] to-[rgba(0,51,107,0.9)]"></div>
</div>

<div class="flex-1 bg-[#eef0f0]">
  <div class="container px-5 pt-10 pb-16 mx-auto lg:pt-20 lg:pb-24">
    <div class="flex justify-end mb-4 md:mb-7 lg:mb-7"><a class="text-base rounded-full btn btn-secondary btn-sm md:btn-md lg:btn-md md:text-xl lg:text-xl min-w-20 md:min-w-24 lg:min-w-24" href="{% url 'posts:index' %}"><i class="fa-solid fa-plus"></i> 撰寫評論</a></div>

    <ul class="flex flex-col gap-6 md:gap-8 lg:gap-8">
      {% for item in page_obj %}
      <li class="relative rounded-xl md:rounded-3xl lg:rounded-3xl bg-white border border-[#e7e8eb] p-6 w-full box-border">
        <div class="flex flex-col md:flex-row lg:flex-row gap-2 md:gap-7 lg:gap-7">
          <h2 class="font-semibold text-xl md:text-2xl lg:text-2xl flex-auto"><a href="{% url 'posts:show' id=item.post.id %}">{{ item.post.title }}</a></h2>
          <div class="flex items-center">
            <span class="self-center">{{ item.post.user }}</span>
            <div class="w-px h-4 bg-[#cccccc] mx-2"></div>
            <i class="fa-solid fa-star text-warning text-base md:text-lg lg:text-lg"></i>
            <span class="text-base md:text-lg lg:text-lg font-light ml-1">{{ item.post.score }}</span>
          </div>
        </div>
        <p class="mt-2 text-sm font-light text-black md:mt-4 lg:mt-4 md:text-base lg:text-base line-clamp-2">{{ item.post.content }}</p>
        <div class="flex flex-col items-start justify-between gap-4 mt-6 lg:flex-row lg:items-center md:mt-4 lg:mt-4">
          <div class="text-xs font-light text-gray-500 md:text-base lg:text-base">{{ item.post.created_at|date:"Y/m/d" }}</div>
          <div class="flex w-full gap-2 md:gap-4 lg:gap-4 lg:w-auto">
            <a href="{% url 'posts:show' id=item.post.id %}" class="flex-auto text-base rounded-full btn btn-primary btn-sm md:btn-md lg:btn-md md:text-xl lg:text-xl min-w-20 md:min-w-24 lg:min-w-24 lg:flex-none">詳細</a>
            {% if item.can_edit %}
              <a class="flex-auto text-base rounded-full btn btn-secondary btn-sm md:btn-md lg:btn-md md:text-xl lg:text-xl lg:flex-none" href="{% url 'posts:edit' id=item.post.id %}"><i class="text-base fa-solid fa-pen lg:text-base"></i></a>
              <form
                class="flex flex-auto gap-2 md:gap-4 lg:gap-4"
                action="{% url 'posts:delete' id=item.post.id %}"
                method="POST"
                hx-post="{% url 'posts:delete' id=item.post.id %}"
                hx-confirm="確認刪除？"
                hx-target="body"
              >
                {% csrf_token %}
                <button class="flex-auto text-base rounded-full btn btn-error btn-sm md:btn-md lg:btn-md md:text-xl lg:text-xl lg:flex-none" type="submit"><i class="fa-solid fa-trash-can"></i></button>
              </form>
            {% endif %}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
    {% include 'shared/_pagination.html' %}
  </div>
</div>
{% endblock %}