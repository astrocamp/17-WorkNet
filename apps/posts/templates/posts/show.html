{% extends "layouts/base.html" %}
{% block content %}
<div class="mt-20 h-24 text-center bg-gray-100 flex justify-center items-center">
    <h1 class="text-3xl font-bold">{{ post.title }}</h1>
</div>
<div class="container p-5 pb-24 mx-auto">
    <div class="flex gap-5 border-b border-gray-300 pb-5">
        <div class="flex-1">Author: {{ post.author }}</div>
        {% include "posts/like.html" with post=post %}
    </div>

    <p class="py-10">{{ post.content }}</p>
    <a class="btn btn-primary text-white" href="{% url 'posts:edit' post.id %}">修改評論</a>

    <section class="p-5 mt-20 border border-gray-300 rounded-2xl">
        <h3 class="font-bold text-xl border-b border-gray-300 pb-5 mb-5">留言</h3>
        {% if comments.exists %}
            <ul class="space-y-4">
                {% for comment in comments %}
                    <li class="flex bg-gray-100 p-4 rounded-2xl">
                        <div class="flex-1">
                            {{ comment.content }}<br>
                            <small>{{ comment.created_at|date:"Y/m/d H:i" }}</small>
                        </div>
                        <form method="post" action="{% url 'posts:comment_delete' comment.id %}">
                            {% csrf_token %}
                            <button class="btn btn-error text-white btn-sm" type="submit">刪除留言</button>
                        </form>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
        <div class="text-center flex items-center justify-center py-3"><p class="text-gray-300">尚無回覆</p></div>

        {% endif %}

        <div class="mt-6">
            <form method="post">
                {% csrf_token %}
                {{ comment_form.as_p }}
                <button class="btn btn-primary text-white" type="submit">送出留言</button>
            </form>
        </div>
    </section>

    <div class="mt-6">
        <a class="btn btn-neutral text-white" href="{% url 'posts:index' %}">回到列表</a>
    </div>
</div>

{% endblock %}
